<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- PWA Settings -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CARE APP">
    <meta name="theme-color" content="#ea580c">
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåø</text></svg>">
    
    <title>CARE APP - ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ç‡∏ä‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢‡∏ä‡πà‡∏≠‡∏î‡∏≠‡∏Å‡∏Å‡∏±‡∏ç‡∏ä‡∏≤ ‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600&family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Sarabun', 'sans-serif'],
                        display: ['Prompt', 'sans-serif'],
                    },
                    colors: {
                        primary: '#ea580c', // Orange 600
                        secondary: '#fb923c', // Orange 400
                        dark: '#7c2d12', // Orange 900
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #fff7ed; /* Orange 50 */
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-track { background: #fff7ed; }
        ::-webkit-scrollbar-thumb { background: #fdba74; border-radius: 4px; }
        
        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        /* Card Hover Effects */
        .hover-lift {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s ease;
        }
        .hover-lift:active {
            transform: scale(0.98);
        }
        
        /* Image Cards */
        .img-card {
            position: relative;
            overflow: hidden;
            border-radius: 1rem;
        }
        .img-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.2) 60%, rgba(0,0,0,0) 100%);
            z-index: 10;
        }
        .img-card img {
            transition: transform 0.5s ease;
        }
        .img-card:hover img {
            transform: scale(1.1);
        }
        
        /* Animation Classes */
        .slide-up { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Checkbox Selection Styles */
        .check-btn-active-pass {
            background-color: #10b981; /* Emerald 500 */
            color: white;
            border-color: #059669;
            box-shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.4);
            transform: scale(1.02);
        }
        .check-btn-active-fail {
            background-color: #ef4444; /* Red 500 */
            color: white;
            border-color: #b91c1c;
            box-shadow: 0 4px 6px -1px rgba(239, 68, 68, 0.4);
            transform: scale(1.02);
        }
        .check-btn-inactive {
            border-color: #e2e8f0;
            color: #94a3b8;
            background-color: white;
        }

        /* Table Inputs */
        .table-input {
            width: 100%;
            min-width: 80px;
            background: #f8fafc;
            border: 1px solid #cbd5e1;
            border-radius: 4px;
            padding: 4px;
            font-size: 11px;
        }
        .table-input:focus {
            outline: 2px solid #ea580c;
            background: white;
        }

        /* Hidden Print Area */
        #print-area {
            position: fixed;
            top: 0;
            left: -9999px;
            width: 210mm;
            min-height: 297mm;
            background: white;
            padding: 15mm;
            font-family: 'Sarabun', sans-serif;
            color: black;
            box-sizing: border-box;
        }
        .print-header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #000;
            padding-bottom: 10px;
        }
        .print-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 10pt;
        }
        .print-table th, .print-table td {
            border: 1px solid #000;
            padding: 6px;
            vertical-align: top;
            word-wrap: break-word;
        }
        .print-table th {
            background-color: #f0f0f0;
            font-weight: bold;
            text-align: center;
        }

        /* Accordion Details */
        details summary { list-style: none; }
        details summary::-webkit-details-marker { display: none; }
        details[open] summary ~ * { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body class="h-screen flex flex-col text-slate-800 bg-orange-50">

    <!-- Header (Glassmorphism) -->
    <header class="glass fixed top-0 w-full z-50 border-b border-orange-200 shadow-sm">
        <div class="max-w-md mx-auto px-4 h-16 flex justify-between items-center">
            <div class="flex items-center gap-3 cursor-pointer" onclick="showSection('home')">
                <div class="w-10 h-10 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-orange-200 shrink-0">
                    <i class="fa-solid fa-leaf text-lg"></i>
                </div>
                <div class="overflow-hidden">
                    <h1 class="font-display font-bold text-lg leading-none text-orange-900">CARE APP</h1>
                    <p class="text-[9px] text-slate-500 font-sans mt-0.5 leading-tight truncate w-full">‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ç‡∏ä‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢‡∏ä‡πà‡∏≠‡∏î‡∏≠‡∏Å‡∏Å‡∏±‡∏ç‡∏ä‡∏≤ ‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£</p>
                </div>
            </div>
            <button onclick="showSection('home')" class="w-10 h-10 rounded-full bg-orange-50 text-slate-400 hover:text-orange-600 hover:bg-orange-100 transition-colors flex items-center justify-center shrink-0">
                <i class="fa-solid fa-house"></i>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto pt-20 pb-24 px-4 scroll-smooth" id="main-container">
        <div class="max-w-md mx-auto min-h-full">

            <!-- HOME DASHBOARD -->
            <div id="home" class="slide-up space-y-6">
                <!-- Hero Section -->
                <div class="relative rounded-2xl overflow-hidden shadow-xl shadow-orange-200 h-56 group">
                    <img src="https://images.unsplash.com/photo-1629196914168-3a964433845c?auto=format&fit=crop&w=800&q=80" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" alt="Medical Cannabis">
                    <div class="absolute inset-0 bg-gradient-to-r from-orange-900/90 to-transparent flex flex-col justify-center p-6">
                        <span class="bg-orange-500/30 text-orange-50 text-[10px] font-bold px-2 py-1 rounded backdrop-blur-sm w-fit mb-2 border border-orange-400/30">SAFETY FIRST</span>
                        
                        <h2 class="font-display text-lg font-bold text-white mb-2 leading-tight">
                            ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô<br>‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏ä‡πà‡∏≠‡∏î‡∏≠‡∏Å‡∏Å‡∏±‡∏ç‡∏ä‡∏≤
                        </h2>
                        <p class="text-orange-100 text-xs font-light opacity-90">
                            ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå
                        </p>
                    </div>
                </div>

                <!-- Menu Grid -->
                <div class="grid grid-cols-2 gap-4">
                    <!-- Check -->
                    <div onclick="showSection('section-c')" class="img-card h-40 bg-white shadow-md cursor-pointer group hover-lift ring-1 ring-orange-200/50">
                        <img src="https://images.unsplash.com/photo-1598257006458-087169a1f08d?auto=format&fit=crop&w=600&q=80" class="w-full h-full object-cover" alt="Checklist">
                        <div class="absolute bottom-0 left-0 w-full p-4 z-20">
                            <div class="w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center text-white mb-2 shadow-lg">
                                <i class="fa-solid fa-clipboard-check text-sm"></i>
                            </div>
                            <h3 class="text-white font-display font-bold text-lg leading-tight">C - Check</h3>
                            <p class="text-orange-100 text-xs opacity-90">‡∏Ñ‡∏±‡∏î‡∏Å‡∏£‡∏≠‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</p>
                        </div>
                    </div>

                    <!-- Advise -->
                    <div onclick="showSection('section-a')" class="img-card h-40 bg-white shadow-md cursor-pointer group hover-lift ring-1 ring-orange-200/50">
                        <img src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?auto=format&fit=crop&w=600&q=80" class="w-full h-full object-cover" alt="Advise">
                        <div class="absolute bottom-0 left-0 w-full p-4 z-20">
                            <div class="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center text-white mb-2 shadow-lg">
                                <i class="fa-solid fa-user-md text-sm"></i>
                            </div>
                            <h3 class="text-white font-display font-bold text-lg leading-tight">A - Advise</h3>
                            <p class="text-blue-100 text-xs opacity-90">‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ</p>
                        </div>
                    </div>

                    <!-- Record -->
                    <div onclick="showSection('section-r')" class="img-card h-40 bg-white shadow-md cursor-pointer group hover-lift ring-1 ring-orange-200/50">
                        <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?auto=format&fit=crop&w=600&q=80" class="w-full h-full object-cover" alt="Record">
                        <div class="absolute bottom-0 left-0 w-full p-4 z-20">
                            <div class="w-8 h-8 bg-amber-500 rounded-lg flex items-center justify-center text-white mb-2 shadow-lg">
                                <i class="fa-solid fa-pen-to-square text-sm"></i>
                            </div>
                            <h3 class="text-white font-display font-bold text-lg leading-tight">R - Record</h3>
                            <p class="text-amber-100 text-xs opacity-90">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
                        </div>
                    </div>

                    <!-- Escalate -->
                    <div onclick="showSection('section-e')" class="img-card h-40 bg-white shadow-md cursor-pointer group hover-lift ring-1 ring-orange-200/50">
                        <img src="https://images.unsplash.com/photo-1587745416684-47953f16f02f?auto=format&fit=crop&w=600&q=80" class="w-full h-full object-cover group-hover:grayscale-0 transition-all" alt="Ambulance">
                        <div class="absolute bottom-0 left-0 w-full p-4 z-20">
                            <div class="w-8 h-8 bg-rose-500 rounded-lg flex items-center justify-center text-white mb-2 shadow-lg">
                                <i class="fa-solid fa-truck-medical text-sm"></i>
                            </div>
                            <h3 class="text-white font-display font-bold text-lg leading-tight">E - Escalate</h3>
                            <p class="text-rose-100 text-xs opacity-90">‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</p>
                        </div>
                    </div>
                </div>

                <!-- Next Button for Home -->
                <div class="flex justify-end mt-4">
                    <button onclick="showSection('section-c')" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-full font-bold text-sm shadow-md flex items-center gap-2 transition-colors animate-pulse">
                        ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô (Check) <i class="fa-solid fa-arrow-right"></i>
                    </button>
                </div>

                <!-- Footer Credits -->
                <div class="text-center mt-10 border-t border-orange-200 pt-6">
                    <p class="text-[10px] text-slate-400 font-bold uppercase tracking-wider mb-2">‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÇ‡∏î‡∏¢</p>
                    <div class="inline-block bg-white p-2 rounded-xl shadow-sm border border-orange-100 px-4">
                        <p class="text-sm text-slate-700 font-display font-bold">‡∏†‡∏Å. ‡∏à‡∏µ‡∏£‡∏†‡∏±‡∏ó‡∏£ ‡∏û‡∏•‡∏≤‡∏¢‡∏á‡∏≤‡∏°</p>
                        <p class="text-[10px] text-slate-500 mt-0.5">‡∏á‡∏≤‡∏ô‡∏Å‡∏±‡∏ç‡∏ä‡∏≤‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå ‡∏™‡∏™‡∏à.‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£</p>
                    </div>
                    <p class="text-[9px] text-slate-300 mt-3">CARE APP V3.1 - Update: 18 ‡∏°.‡∏Ñ. 2569</p>
                </div>
            </div>

            <!-- SECTION C: CHECK -->
            <div id="section-c" class="hidden slide-up">
                <div class="mb-6 flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-display font-bold text-slate-800">‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡∏Å‡∏£‡∏≠‡∏á</h2>
                        <p class="text-sm text-slate-500">C - Checkpoint Analysis</p>
                    </div>
                    <div class="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center text-orange-600">
                        <i class="fa-solid fa-clipboard-user"></i>
                    </div>
                </div>

                <!-- Checklist Form -->
                <div class="space-y-4 pb-4">
                    <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-100 text-center">
                        <h3 class="font-bold text-slate-700 mb-1">‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</h3>
                        <p class="text-xs text-slate-500">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏•</p>
                    </div>

                    <!-- Q1 -->
                    <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-100 transition-all">
                        <div class="flex items-start gap-3 mb-3">
                            <div class="w-8 h-8 rounded-full bg-orange-50 flex items-center justify-center text-orange-500 shrink-0 border border-orange-100"><i class="fa-solid fa-id-card"></i></div>
                            <div>
                                <div class="font-bold text-slate-700 text-sm">1. ‡∏≠‡∏≤‡∏¢‡∏∏‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</div>
                                <div class="text-xs text-slate-500">‡πÄ‡∏Å‡∏ì‡∏ë‡πå: ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏≤‡∏¢‡∏∏ 20 ‡∏õ‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="selectCheck('q1', false)" id="q1-fail" class="check-btn-inactive rounded-lg p-2.5 text-xs font-bold transition-all flex items-center justify-center gap-2 border">
                                <i class="fa-solid fa-xmark"></i> ‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 20 ‡∏õ‡∏µ
                            </button>
                            <button onclick="selectCheck('q1', true)" id="q1-pass" class="check-btn-inactive rounded-lg p-2.5 text-xs font-bold transition-all flex items-center justify-center gap-2 border">
                                <i class="fa-solid fa-check"></i> 20 ‡∏õ‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ
                            </button>
                        </div>
                    </div>

                    <!-- Q2 -->
                    <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-100 transition-all">
                        <div class="flex items-start gap-3 mb-3">
                            <div class="w-8 h-8 rounded-full bg-orange-50 flex items-center justify-center text-orange-500 shrink-0 border border-orange-100"><i class="fa-solid fa-person-pregnant"></i></div>
                            <div>
                                <div class="font-bold text-slate-700 text-sm">2. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡∏£‡∏£‡∏†‡πå/‡πÉ‡∏´‡πâ‡∏ô‡∏°‡∏ö‡∏∏‡∏ï‡∏£</div>
                                <div class="text-xs text-slate-500">‡πÄ‡∏Å‡∏ì‡∏ë‡πå: ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏†‡∏≤‡∏ß‡∏∞‡∏î‡∏±‡∏á‡∏Å‡∏•‡πà‡∏≤‡∏ß</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="selectCheck('q2', false)" id="q2-fail" class="check-btn-inactive rounded-lg p-2.5 text-xs font-bold transition-all flex items-center justify-center gap-2 border">
                                <i class="fa-solid fa-xmark"></i> ‡∏°‡∏µ/‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡πÉ‡∏à
                            </button>
                            <button onclick="selectCheck('q2', true)" id="q2-pass" class="check-btn-inactive rounded-lg p-2.5 text-xs font-bold transition-all flex items-center justify-center gap-2 border">
                                <i class="fa-solid fa-check"></i> ‡πÑ‡∏°‡πà‡∏°‡∏µ
                            </button>
                        </div>
                    </div>

                    <!-- Q3 -->
                    <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-100 transition-all">
                        <div class="flex items-start gap-3 mb-3">
                            <div class="w-8 h-8 rounded-full bg-orange-50 flex items-center justify-center text-orange-500 shrink-0 border border-orange-100"><i class="fa-solid fa-brain"></i></div>
                            <div>
                                <div class="font-bold text-slate-700 text-sm">3. ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÇ‡∏£‡∏Ñ‡∏à‡∏¥‡∏ï‡πÄ‡∏ß‡∏ä‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</div>
                                <div class="text-xs text-slate-500">‡πÄ‡∏Å‡∏ì‡∏ë‡πå: ‡∏´‡∏π‡πÅ‡∏ß‡πà‡∏ß ‡∏†‡∏≤‡∏û‡∏´‡∏•‡∏≠‡∏ô ‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="selectCheck('q3', false)" id="q3-fail" class="check-btn-inactive rounded-lg p-2.5 text-xs font-bold transition-all flex items-center justify-center gap-2 border">
                                <i class="fa-solid fa-xmark"></i> ‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
                            </button>
                            <button onclick="selectCheck('q3', true)" id="q3-pass" class="check-btn-inactive rounded-lg p-2.5 text-xs font-bold transition-all flex items-center justify-center gap-2 border">
                                <i class="fa-solid fa-check"></i> ‡πÑ‡∏°‡πà‡∏°‡∏µ
                            </button>
                        </div>
                    </div>

                    <!-- Q4 -->
                    <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-100 transition-all">
                        <div class="flex items-start gap-3 mb-3">
                            <div class="w-8 h-8 rounded-full bg-orange-50 flex items-center justify-center text-orange-500 shrink-0 border border-orange-100"><i class="fa-solid fa-heart-pulse"></i></div>
                            <div>
                                <div class="font-bold text-slate-700 text-sm">4. ‡πÇ‡∏£‡∏Ñ‡∏´‡∏±‡∏ß‡πÉ‡∏à/‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î</div>
                                <div class="text-xs text-slate-500">‡πÄ‡∏Å‡∏ì‡∏ë‡πå: ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏ï‡πâ‡∏ô‡∏ú‡∏¥‡∏î‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞ ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="selectCheck('q4', false)" id="q4-fail" class="check-btn-inactive rounded-lg p-2.5 text-xs font-bold transition-all flex items-center justify-center gap-2 border">
                                <i class="fa-solid fa-xmark"></i> ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á
                            </button>
                            <button onclick="selectCheck('q4', true)" id="q4-pass" class="check-btn-inactive rounded-lg p-2.5 text-xs font-bold transition-all flex items-center justify-center gap-2 border">
                                <i class="fa-solid fa-check"></i> ‡πÑ‡∏°‡πà‡∏°‡∏µ/‡∏õ‡∏Å‡∏ï‡∏¥
                            </button>
                        </div>
                    </div>

                    <!-- Q5 -->
                    <div class="bg-white rounded-xl p-4 shadow-sm border border-slate-100 transition-all">
                        <div class="flex items-start gap-3 mb-3">
                            <div class="w-8 h-8 rounded-full bg-orange-50 flex items-center justify-center text-orange-500 shrink-0 border border-orange-100"><i class="fa-solid fa-car"></i></div>
                            <div>
                                <div class="font-bold text-slate-700 text-sm">5. ‡∏Å‡∏≤‡∏£‡∏Ç‡∏±‡∏ö‡∏Ç‡∏µ‡πà‡∏¢‡∏≤‡∏ô‡∏û‡∏≤‡∏´‡∏ô‡∏∞</div>
                                <div class="text-xs text-slate-500">‡πÄ‡∏Å‡∏ì‡∏ë‡πå: ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ç‡∏±‡∏ö‡∏Ç‡∏µ‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á 6 ‡∏ä‡∏°. ‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="selectCheck('q5', false)" id="q5-fail" class="check-btn-inactive rounded-lg p-2.5 text-xs font-bold transition-all flex items-center justify-center gap-2 border">
                                <i class="fa-solid fa-xmark"></i> ‡∏Ç‡∏±‡∏ö‡∏Ç‡∏µ‡πà
                            </button>
                            <button onclick="selectCheck('q5', true)" id="q5-pass" class="check-btn-inactive rounded-lg p-2.5 text-xs font-bold transition-all flex items-center justify-center gap-2 border">
                                <i class="fa-solid fa-check"></i> ‡πÑ‡∏°‡πà‡∏Ç‡∏±‡∏ö‡∏Ç‡∏µ‡πà
                            </button>
                        </div>
                    </div>

                    <!-- Result Area -->
                    <div id="check-result" class="hidden transition-all duration-500">
                        <!-- JS injects content here -->
                    </div>

                    <!-- Nav Buttons -->
                    <div class="flex justify-between items-center mt-6 pt-4 border-t border-orange-200">
                        <button onclick="showSection('home')" class="text-slate-500 hover:text-orange-600 font-bold text-sm flex items-center gap-2">
                            <i class="fa-solid fa-arrow-left"></i> ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Home)
                        </button>
                        <!-- Next Button (Initially Hidden) -->
                        <button id="btn-c-next" onclick="showSection('section-a')" class="hidden bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-full font-bold text-sm shadow-md flex items-center gap-2 transition-colors">
                            ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (Advise) <i class="fa-solid fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- SECTION A: ADVISE -->
            <div id="section-a" class="hidden slide-up">
                <div class="mb-6 flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-display font-bold text-slate-800">‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>
                        <p class="text-sm text-slate-500">A - Advice & Action</p>
                    </div>
                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600">
                        <i class="fa-solid fa-user-md"></i>
                    </div>
                </div>

                <!-- Tab Navigation -->
                <div class="flex bg-white p-1.5 rounded-2xl shadow-sm border border-slate-200 mb-6">
                    <button onclick="switchTab('tab-use')" id="btn-tab-use" class="flex-1 py-2 rounded-xl text-xs font-bold transition-all bg-slate-800 text-white shadow-md">‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ</button>
                    <button onclick="switchTab('tab-symptom')" id="btn-tab-symptom" class="flex-1 py-2 rounded-xl text-xs font-bold transition-all text-slate-500 hover:bg-slate-50">‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏≠‡∏≤‡∏Å‡∏≤‡∏£</button>
                    <button onclick="switchTab('tab-help')" id="btn-tab-help" class="flex-1 py-2 rounded-xl text-xs font-bold transition-all text-slate-500 hover:bg-slate-50">‡πÅ‡∏Å‡πâ‡πÄ‡∏°‡∏≤</button>
                </div>

                <!-- TAB 1: HOW TO USE -->
                <div id="tab-use" class="tab-content space-y-4">
                    <!-- Start Low Go Slow Banner -->
                    <div class="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-6 text-white text-center shadow-lg shadow-blue-200 relative overflow-hidden">
                        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"></div>
                        <h3 class="font-display text-2xl font-bold mb-1 relative z-10">Start Low, Go Slow</h3>
                        <p class="text-blue-100 text-xs relative z-10 opacity-90">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡∏•‡∏∞‡∏ô‡πâ‡∏≠‡∏¢ ‡πÅ‡∏•‡∏∞‡πÉ‡∏à‡πÄ‡∏¢‡πá‡∏ô‡πÜ</p>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-white p-4 rounded-2xl border border-slate-100 shadow-sm text-center">
                            <div class="w-12 h-12 mx-auto bg-slate-50 rounded-full flex items-center justify-center text-slate-600 mb-3 text-xl">
                                <i class="fa-solid fa-joint"></i>
                            </div>
                            <h4 class="font-bold text-slate-700 mb-1">‡∏™‡∏π‡∏ö (Inhale)</h4>
                            <p class="text-xs text-slate-500 mb-2">‡∏≠‡∏≠‡∏Å‡∏§‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏£‡πá‡∏ß 5-10 ‡∏ô‡∏≤‡∏ó‡∏µ</p>
                            <div class="bg-blue-50 text-blue-700 text-[10px] font-bold py-1 px-2 rounded-lg inline-block">
                                ‡πÄ‡∏£‡∏¥‡πà‡∏° 1-2 ‡∏û‡∏±‡∏ü / ‡∏£‡∏≠ 15 ‡∏ô‡∏≤‡∏ó‡∏µ
                            </div>
                        </div>
                        <div class="bg-white p-4 rounded-2xl border border-slate-100 shadow-sm text-center">
                            <div class="w-12 h-12 mx-auto bg-slate-50 rounded-full flex items-center justify-center text-slate-600 mb-3 text-xl">
                                <i class="fa-solid fa-cookie-bite"></i>
                            </div>
                            <h4 class="font-bold text-slate-700 mb-1">‡∏Å‡∏¥‡∏ô (Edible)</h4>
                            <p class="text-xs text-slate-500 mb-2">‡∏≠‡∏≠‡∏Å‡∏§‡∏ó‡∏ò‡∏¥‡πå‡∏ä‡πâ‡∏≤ 30-60 ‡∏ô‡∏≤‡∏ó‡∏µ</p>
                            <div class="bg-orange-50 text-orange-700 text-[10px] font-bold py-1 px-2 rounded-lg inline-block">
                                ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ä‡∏¥‡πâ‡∏ô / ‡∏£‡∏≠ 1 ‡∏ä‡∏°.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TAB 2: SYMPTOMS (Traffic Light) -->
                <div id="tab-symptom" class="tab-content hidden space-y-4">
                    <div class="space-y-3">
                        <div class="bg-white p-4 rounded-xl border-l-4 border-emerald-500 shadow-sm">
                            <h4 class="font-bold text-emerald-700 text-sm mb-1"><i class="fa-solid fa-circle text-xs mr-2"></i>‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏ï‡∏¥ (Green)</h4>
                            <p class="text-xs text-slate-600 pl-5">‡∏õ‡∏≤‡∏Å‡πÅ‡∏´‡πâ‡∏á, ‡∏Ñ‡∏≠‡πÅ‡∏´‡πâ‡∏á, ‡∏´‡∏¥‡∏ß‡∏ö‡πà‡∏≠‡∏¢, ‡∏á‡πà‡∏ß‡∏á‡∏ô‡∏≠‡∏ô, ‡∏´‡∏±‡∏ß‡πÄ‡∏£‡∏≤‡∏∞‡∏á‡πà‡∏≤‡∏¢, ‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢</p>
                        </div>
                        <div class="bg-white p-4 rounded-xl border-l-4 border-amber-500 shadow-sm">
                            <h4 class="font-bold text-amber-700 text-sm mb-1"><i class="fa-solid fa-circle text-xs mr-2"></i>‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ù‡πâ‡∏≤‡∏£‡∏∞‡∏ß‡∏±‡∏á (Yellow)</h4>
                            <p class="text-xs text-slate-600 pl-5">‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡∏´‡∏±‡∏ß, ‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏™‡πâ, ‡πÉ‡∏à‡∏™‡∏±‡πà‡∏ô, ‡∏ß‡∏¥‡∏ï‡∏Å‡∏Å‡∏±‡∏á‡∏ß‡∏• (Panic), ‡∏™‡∏±‡∏ö‡∏™‡∏ô</p>
                        </div>
                        <div class="bg-white p-4 rounded-xl border-l-4 border-rose-600 shadow-sm">
                            <h4 class="font-bold text-rose-700 text-sm mb-1"><i class="fa-solid fa-circle text-xs animate-ping mr-2"></i>‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢ (Red)</h4>
                            <p class="text-xs text-slate-600 pl-5">‡πÄ‡∏à‡πá‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á, ‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å, ‡∏ä‡∏±‡∏Å‡πÄ‡∏Å‡∏£‡πá‡∏á, ‡∏´‡∏°‡∏î‡∏™‡∏ï‡∏¥, ‡πÄ‡∏´‡πá‡∏ô‡∏†‡∏≤‡∏û‡∏´‡∏•‡∏≠‡∏ô‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</p>
                        </div>
                    </div>
                </div>

                <!-- TAB 3: HELP (Rescue) -->
                <div id="tab-help" class="tab-content hidden">
                    <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                        <img src="https://images.unsplash.com/photo-1544367563-12123d8965cd?auto=format&fit=crop&w=800&q=80" class="w-full h-32 object-cover opacity-80" alt="Relaxation">
                        <div class="p-5">
                            <h3 class="font-bold text-lg text-slate-800 mb-4 text-center">‡∏ä‡∏∏‡∏î‡∏õ‡∏ê‡∏°‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• (Rescue Kit)</h3>
                            <div class="grid grid-cols-3 gap-3 mb-6">
                                <div class="text-center">
                                    <div class="w-12 h-12 bg-pink-50 rounded-full flex items-center justify-center text-pink-500 mx-auto mb-2 text-lg shadow-sm">
                                        <i class="fa-solid fa-candy-cane"></i>
                                    </div>
                                    <span class="text-xs font-bold text-slate-600">‡∏ô‡πâ‡∏≥‡∏´‡∏ß‡∏≤‡∏ô</span>
                                </div>
                                <div class="text-center">
                                    <div class="w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center text-slate-600 mx-auto mb-2 text-lg shadow-sm">
                                        <i class="fa-solid fa-pepper-hot"></i>
                                    </div>
                                    <span class="text-xs font-bold text-slate-600">‡∏û‡∏£‡∏¥‡∏Å‡πÑ‡∏ó‡∏¢‡∏î‡∏≥</span>
                                </div>
                                <div class="text-center">
                                    <div class="w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center text-blue-500 mx-auto mb-2 text-lg shadow-sm">
                                        <i class="fa-solid fa-glass-water"></i>
                                    </div>
                                    <span class="text-xs font-bold text-slate-600">‡∏ô‡πâ‡∏≥‡πÄ‡∏õ‡∏•‡πà‡∏≤</span>
                                </div>
                            </div>
                            <div class="bg-slate-50 rounded-xl p-4 border border-slate-100 text-center">
                                <h4 class="text-sm font-bold text-slate-700 mb-2">‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏´‡∏≤‡∏¢‡πÉ‡∏à 4-7-8</h4>
                                <div class="flex justify-center gap-4 text-xs text-slate-500">
                                    <div><span class="block text-xl font-bold text-orange-600">4s</span>‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏Ç‡πâ‡∏≤</div>
                                    <div><span class="block text-xl font-bold text-orange-600">7s</span>‡∏Å‡∏•‡∏±‡πâ‡∏ô‡πÑ‡∏ß‡πâ</div>
                                    <div><span class="block text-xl font-bold text-orange-600">8s</span>‡∏ú‡πà‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Nav Buttons -->
                <div class="flex justify-between items-center mt-8 pt-4 border-t border-orange-200">
                    <button onclick="showSection('section-c')" class="text-slate-500 hover:text-orange-600 font-bold text-sm flex items-center gap-2">
                        <i class="fa-solid fa-arrow-left"></i> ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Check)
                    </button>
                    <button onclick="showSection('section-r')" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-full font-bold text-sm shadow-md flex items-center gap-2 transition-colors">
                        ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (Record) <i class="fa-solid fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- SECTION R: RECORD -->
            <div id="section-r" class="hidden slide-up">
                <div class="mb-6 flex items-center justify-between">
                    <div>
                        <!-- UPDATED HEADER -->
                        <h2 class="text-xl font-display font-bold text-slate-800 leading-tight">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏û‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå<br>‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ä‡πà‡∏≠‡∏î‡∏≠‡∏Å‡∏Å‡∏±‡∏ç‡∏ä‡∏≤</h2>
                        <p class="text-sm text-slate-500">R - Record & Report</p>
                    </div>
                    <div class="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center text-orange-600">
                        <i class="fa-solid fa-file-pen"></i>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-lg shadow-slate-200 border border-slate-100 overflow-hidden" id="record-card">
                    <div class="p-4 bg-slate-800 text-white flex justify-between items-center">
                        <span class="font-bold text-sm"><i class="fa-solid fa-table mr-2"></i>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå</span>
                        <button onclick="generatePDF()" class="bg-orange-500 hover:bg-orange-600 text-white text-xs px-3 py-1.5 rounded-lg transition-colors font-bold shadow-lg shadow-orange-900/20">
                            <i class="fa-solid fa-print mr-1"></i> PDF
                        </button>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm" id="recordTable">
                            <thead class="bg-slate-50 text-slate-500 font-display border-b border-slate-200 whitespace-nowrap">
                                <tr>
                                    <th class="p-2">‡∏ß/‡∏î/‡∏õ</th>
                                    <th class="p-2">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</th>
                                    <th class="p-2">‡πÄ‡∏û‡∏®/‡∏≠‡∏≤‡∏¢‡∏∏</th>
                                    <th class="p-2">‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß</th>
                                    <th class="p-2">‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå</th>
                                    <th class="p-2">‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ/‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì</th>
                                    <th class="p-2">‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏û‡∏ö</th>
                                    <th class="p-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</th>
                                    <th class="p-2">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</th>
                                    <th class="p-2">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</th>
                                </tr>
                            </thead>
                            <tbody id="tableBody" class="divide-y divide-slate-100">
                                <!-- JS Generated -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="p-4 bg-slate-50 border-t border-slate-200 text-[10px] text-slate-500">
                        ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ã‡πâ‡∏≤‡∏¢-‡∏Ç‡∏ß‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
                    </div>
                </div>

                <!-- Nav Buttons -->
                <div class="flex justify-between items-center mt-8 pt-4 border-t border-orange-200">
                    <button onclick="showSection('section-a')" class="text-slate-500 hover:text-orange-600 font-bold text-sm flex items-center gap-2">
                        <i class="fa-solid fa-arrow-left"></i> ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Advise)
                    </button>
                    <button onclick="showSection('section-e')" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-full font-bold text-sm shadow-md flex items-center gap-2 transition-colors">
                        ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (Escalate) <i class="fa-solid fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- SECTION E: ESCALATE -->
            <div id="section-e" class="hidden slide-up">
                <div class="mb-6 flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-display font-bold text-slate-800">‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</h2>
                        <p class="text-sm text-slate-500">E - Escalate</p>
                    </div>
                    <div class="w-10 h-10 bg-rose-100 rounded-full flex items-center justify-center text-rose-600">
                        <i class="fa-solid fa-truck-medical"></i>
                    </div>
                </div>

                <div class="space-y-6">
                    <!-- SOS Button -->
                    <a href="tel:1669" class="group relative block w-full bg-rose-600 rounded-3xl p-8 text-center text-white shadow-2xl shadow-rose-300 overflow-hidden transform transition active:scale-95">
                        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/diagonal-stripes.png')] opacity-10"></div>
                        <div class="absolute -top-10 -right-10 w-32 h-32 bg-white opacity-10 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-700"></div>
                        
                        <div class="relative z-10">
                            <div class="w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm animate-pulse">
                                <i class="fa-solid fa-phone text-4xl"></i>
                            </div>
                            <h3 class="text-4xl font-display font-bold mb-1">1669</h3>
                            <p class="text-rose-100 font-medium">‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏£‡∏ñ‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</p>
                        </div>
                    </a>

                    <!-- Criteria Card -->
                    <div class="bg-white rounded-2xl p-6 shadow-sm border border-slate-100">
                        <h4 class="font-bold text-slate-700 mb-4 border-l-4 border-rose-500 pl-3">‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡∏™‡πà‡∏á‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</h4>
                        <ul class="space-y-3">
                            <li class="flex items-start gap-3 p-3 bg-rose-50 rounded-xl border border-rose-100">
                                <i class="fa-solid fa-heart-crack text-rose-500 mt-1"></i>
                                <span class="text-sm text-slate-600">‡πÄ‡∏à‡πá‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á ‡∏£‡πâ‡∏≤‡∏ß‡πÑ‡∏õ‡∏Å‡∏£‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Ç‡∏ô‡∏ã‡πâ‡∏≤‡∏¢</span>
                            </li>
                            <li class="flex items-start gap-3 p-3 bg-rose-50 rounded-xl border border-rose-100">
                                <i class="fa-solid fa-lungs text-rose-500 mt-1"></i>
                                <span class="text-sm text-slate-600">‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å ‡∏´‡∏≠‡∏ö‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</span>
                            </li>
                            <li class="flex items-start gap-3 p-3 bg-rose-50 rounded-xl border border-rose-100">
                                <i class="fa-solid fa-brain text-rose-500 mt-1"></i>
                                <span class="text-sm text-slate-600">‡∏ä‡∏±‡∏Å‡πÄ‡∏Å‡∏£‡πá‡∏á ‡∏´‡∏£‡∏∑‡∏≠ ‡∏´‡∏°‡∏î‡∏™‡∏ï‡∏¥ ‡∏õ‡∏•‡∏∏‡∏Å‡πÑ‡∏°‡πà‡∏ï‡∏∑‡πà‡∏ô</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Nav Buttons -->
                <div class="flex justify-between items-center mt-8 pt-4 border-t border-orange-200">
                    <button onclick="showSection('section-r')" class="text-slate-500 hover:text-orange-600 font-bold text-sm flex items-center gap-2">
                        <i class="fa-solid fa-arrow-left"></i> ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Record)
                    </button>
                    <button onclick="showSection('home')" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-full font-bold text-sm shadow-md flex items-center gap-2 transition-colors">
                        ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô (Home) <i class="fa-solid fa-check"></i>
                    </button>
                </div>
            </div>

        </div>
    </main>

    <!-- Bottom Navigation for Quick Access -->
    <nav class="fixed bottom-0 w-full bg-white border-t border-orange-200 pb-safe z-40 lg:hidden">
        <div class="flex justify-around items-center h-16 max-w-md mx-auto">
            <button onclick="showSection('home')" class="nav-btn flex-1 flex flex-col items-center justify-center text-slate-400 hover:text-orange-600 active:text-orange-700">
                <i class="fa-solid fa-house text-xl mb-1"></i>
                <span class="text-[10px]">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</span>
            </button>
            <button onclick="showSection('section-r')" class="nav-btn flex-1 flex flex-col items-center justify-center text-slate-400 hover:text-orange-500 active:text-orange-600">
                <i class="fa-solid fa-pen-to-square text-xl mb-1"></i>
                <span class="text-[10px]">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span>
            </button>
            <button onclick="showSection('section-e')" class="nav-btn flex-1 flex flex-col items-center justify-center text-slate-400 hover:text-rose-500 active:text-rose-600">
                <i class="fa-solid fa-phone-volume text-xl mb-1"></i>
                <span class="text-[10px]">‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô</span>
            </button>
        </div>
    </nav>

    <!-- Hidden Report Template -->
    <div id="print-area">
        <div class="print-header">
            <h2 style="font-size: 16pt; font-weight: bold; margin: 0;">‡πÅ‡∏ö‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÑ‡∏°‡πà‡∏û‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏Å‡∏±‡∏ç‡∏ä‡∏≤</h2>
            <p style="font-size: 12pt; margin: 5px 0 0 0;">‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏™‡∏∏‡∏Ç‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏™‡∏°‡∏∏‡∏ó‡∏£‡∏õ‡∏£‡∏≤‡∏Å‡∏≤‡∏£</p>
        </div>
        <div style="font-size: 10pt; margin-bottom: 10px; text-align: right;">
            ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô: <span id="print-date"></span>
        </div>
        <table class="print-table" id="print-table-body">
            <thead>
                <tr>
                    <th style="width: 10%;">‡∏ß/‡∏î/‡∏õ<br>‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏</th>
                    <th style="width: 15%;">‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</th>
                    <th style="width: 8%;">‡πÄ‡∏û‡∏®/‡∏≠‡∏≤‡∏¢‡∏∏</th>
                    <th style="width: 10%;">‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß</th>
                    <th style="width: 10%;">‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå/<br>‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤</th>
                    <th style="width: 10%;">‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ/<br>‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì</th>
                    <th style="width: 12%;">‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏û‡∏ö</th>
                    <th style="width: 8%;">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</th>
                    <th style="width: 10%;">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                    <th style="width: 7%;">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</th>
                </tr>
            </thead>
            <tbody>
                <!-- Content will be injected here -->
            </tbody>
        </table>
    </div>

    <script>
        // Data Handling
        function initTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            const today = new Date().toISOString().split('T')[0];

            for(let i=0; i<5; i++) { 
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="p-1"><input type="date" data-id="r${i}_date" class="table-input" placeholder="‡∏ß/‡∏î/‡∏õ"></td>
                    <td class="p-1"><input type="text" data-id="r${i}_name" class="table-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•"></td>
                    <td class="p-1"><input type="text" data-id="r${i}_demo" class="table-input" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ä‡∏≤‡∏¢/30"></td>
                    <td class="p-1"><input type="text" data-id="r${i}_disease" class="table-input" placeholder="-"></td>
                    <td class="p-1"><input type="text" data-id="r${i}_source" class="table-input" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡πâ‡∏≤‡∏ô/‡∏™‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå"></td>
                    <td class="p-1">
                        <select data-id="r${i}_method" class="table-input mb-1" style="font-size: 10px;">
                            <option value="">-‡∏ß‡∏¥‡∏ò‡∏µ-</option>
                            <option value="‡∏™‡∏π‡∏ö">‡∏™‡∏π‡∏ö</option>
                            <option value="‡∏Å‡∏¥‡∏ô">‡∏Å‡∏¥‡∏ô</option>
                            <option value="‡∏´‡∏¢‡∏î">‡∏´‡∏¢‡∏î</option>
                        </select>
                        <select data-id="r${i}_qty" class="table-input" style="font-size: 10px;">
                            <option value="">-‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì-</option>
                            <option value="‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢">‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢</option>
                            <option value="1-3 ‡∏û‡∏±‡∏ü">1-3 ‡∏û‡∏±‡∏ü</option>
                            <option value="‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏°‡∏ß‡∏ô">‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏°‡∏ß‡∏ô</option>
                            <option value="1 ‡∏°‡∏ß‡∏ô">1 ‡∏°‡∏ß‡∏ô</option>
                            <option value="‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ä‡∏¥‡πâ‡∏ô">‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ä‡∏¥‡πâ‡∏ô</option>
                            <option value="1 ‡∏ä‡∏¥‡πâ‡∏ô">1 ‡∏ä‡∏¥‡πâ‡∏ô</option>
                            <option value="1-2 ‡∏´‡∏¢‡∏î">1-2 ‡∏´‡∏¢‡∏î</option>
                            <option value="‡∏°‡∏≤‡∏Å">‡∏°‡∏≤‡∏Å</option>
                        </select>
                    </td>
                    <td class="p-1">
                        <select data-id="r${i}_symptom" class="table-input">
                            <option value="">-‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏Å‡∏≤‡∏£-</option>
                            <option value="‡∏ß‡∏¥‡∏á‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô/‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏°‡∏∏‡∏ô">‡∏ß‡∏¥‡∏á‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô/‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏°‡∏∏‡∏ô</option>
                            <option value="‡∏õ‡∏≤‡∏Å‡πÅ‡∏´‡πâ‡∏á/‡∏Ñ‡∏≠‡πÅ‡∏´‡πâ‡∏á">‡∏õ‡∏≤‡∏Å‡πÅ‡∏´‡πâ‡∏á/‡∏Ñ‡∏≠‡πÅ‡∏´‡πâ‡∏á</option>
                            <option value="‡πÉ‡∏à‡∏™‡∏±‡πà‡∏ô/‡πÅ‡∏ô‡πà‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å">‡πÉ‡∏à‡∏™‡∏±‡πà‡∏ô/‡πÅ‡∏ô‡πà‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å</option>
                            <option value="‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏™‡πâ/‡∏≠‡∏≤‡πÄ‡∏à‡∏µ‡∏¢‡∏ô">‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏™‡πâ/‡∏≠‡∏≤‡πÄ‡∏à‡∏µ‡∏¢‡∏ô</option>
                            <option value="‡∏ß‡∏¥‡∏ï‡∏Å‡∏Å‡∏±‡∏á‡∏ß‡∏•/Panic">‡∏ß‡∏¥‡∏ï‡∏Å‡∏Å‡∏±‡∏á‡∏ß‡∏•/Panic</option>
                            <option value="‡∏†‡∏≤‡∏û‡∏´‡∏•‡∏≠‡∏ô/‡∏™‡∏±‡∏ö‡∏™‡∏ô">‡∏†‡∏≤‡∏û‡∏´‡∏•‡∏≠‡∏ô/‡∏™‡∏±‡∏ö‡∏™‡∏ô</option>
                            <option value="‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å">‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å</option>
                            <option value="‡∏´‡∏°‡∏î‡∏™‡∏ï‡∏¥/‡∏ä‡∏±‡∏Å">‡∏´‡∏°‡∏î‡∏™‡∏ï‡∏¥/‡∏ä‡∏±‡∏Å</option>
                            <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                        </select>
                    </td>
                    <td class="p-1">
                        <select data-id="r${i}_severity" class="table-input">
                            <option value="">-</option>
                            <option value="‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢">‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢</option>
                            <option value="‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</option>
                            <option value="‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á">‡∏£‡∏∏‡∏ô‡πÅ‡∏£‡∏á</option>
                        </select>
                    </td>
                    <td class="p-1"><input type="text" data-id="r${i}_action" class="table-input" placeholder="‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç..."></td>
                    <td class="p-1">
                        <select data-id="r${i}_outcome" class="table-input">
                            <option value="">-</option>
                            <option value="‡∏´‡∏≤‡∏¢">‡∏´‡∏≤‡∏¢</option>
                            <option value="‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô">‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô</option>
                            <option value="‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠">‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠</option>
                        </select>
                    </td>
                `;
                tbody.appendChild(tr);
            }
            loadData(today);
        }

        function saveData(e) {
            if(e.target.dataset.id) {
                localStorage.setItem('care_' + e.target.dataset.id, e.target.value);
            }
        }

        function loadData(today) {
            const inputs = document.querySelectorAll('input, select');
            inputs.forEach(input => {
                const val = localStorage.getItem('care_' + input.dataset.id);
                if(val) {
                    input.value = val;
                } else if(input.type === 'date') {
                    input.value = today; 
                }
                input.addEventListener('input', saveData);
            });
        }

        // Checklist Logic (Same as before)
        const checkState = { q1: null, q2: null, q3: null, q4: null, q5: null };

        function selectCheck(qId, isPass) {
            checkState[qId] = isPass;
            const passBtn = document.getElementById(qId + '-pass');
            const failBtn = document.getElementById(qId + '-fail');

            if(isPass) {
                passBtn.className = 'check-btn-active-pass rounded-lg p-2.5 text-xs font-bold transition-all flex items-center justify-center gap-2 border';
                failBtn.className = 'check-btn-inactive rounded-lg p-2.5 text-xs font-bold transition-all flex items-center justify-center gap-2 border opacity-50';
            } else {
                failBtn.className = 'check-btn-active-fail rounded-lg p-2.5 text-xs font-bold transition-all flex items-center justify-center gap-2 border';
                passBtn.className = 'check-btn-inactive rounded-lg p-2.5 text-xs font-bold transition-all flex items-center justify-center gap-2 border opacity-50';
            }
            evaluateCheck();
        }

        function evaluateCheck() {
            const keys = Object.keys(checkState);
            const allAnswered = keys.every(k => checkState[k] !== null);
            const anyFail = keys.some(k => checkState[k] === false);
            
            const resultDiv = document.getElementById('check-result');
            const nextBtn = document.getElementById('btn-c-next');
            
            if (!allAnswered) {
                resultDiv.className = 'hidden';
                nextBtn.classList.add('hidden');
                return;
            }

            resultDiv.classList.remove('hidden');
            void resultDiv.offsetWidth; 
            
            if (anyFail) {
                resultDiv.className = 'bg-rose-100 border border-rose-200 p-6 rounded-2xl text-center shadow-inner animate-pulse';
                resultDiv.innerHTML = `
                    <div class="w-16 h-16 bg-rose-500 rounded-full flex items-center justify-center text-white text-3xl mx-auto mb-3 shadow-lg"><i class="fa-solid fa-ban"></i></div>
                    <h3 class="text-rose-700 font-bold text-lg">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢‡πÑ‡∏î‡πâ</h3>
                    <p class="text-rose-600 text-xs mt-1">‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</p>
                `;
                nextBtn.classList.add('hidden');
            } else {
                resultDiv.className = 'bg-emerald-100 border border-emerald-200 p-6 rounded-2xl text-center shadow-inner animate-pulse';
                resultDiv.innerHTML = `
                    <div class="w-16 h-16 bg-emerald-500 rounded-full flex items-center justify-center text-white text-3xl mx-auto mb-3 shadow-lg"><i class="fa-solid fa-check"></i></div>
                    <h3 class="text-emerald-700 font-bold text-lg">‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢</h3>
                    <p class="text-emerald-600 text-xs mt-1">‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</p>
                `;
                nextBtn.classList.remove('hidden');
            }
        }

        // Navigation Logic
        function showSection(id) {
            const sections = ['home', 'section-c', 'section-a', 'section-r', 'section-e'];
            sections.forEach(s => document.getElementById(s).classList.add('hidden'));
            const target = document.getElementById(id);
            target.classList.remove('hidden');
            target.classList.remove('slide-up'); 
            void target.offsetWidth; 
            target.classList.add('slide-up');
            document.getElementById('main-container').scrollTo(0,0);
        }

        function switchTab(id) {
            const tabs = ['tab-use', 'tab-symptom', 'tab-help'];
            const btns = ['btn-tab-use', 'btn-tab-symptom', 'btn-tab-help'];
            tabs.forEach(t => document.getElementById(t).classList.add('hidden'));
            btns.forEach(b => {
                document.getElementById(b).className = "flex-1 py-2 rounded-xl text-xs font-bold transition-all text-slate-500 hover:bg-slate-50";
            });
            document.getElementById(id).classList.remove('hidden');
            document.getElementById('btn-' + id).className = "flex-1 py-2 rounded-xl text-xs font-bold transition-all bg-slate-800 text-white shadow-md";
        }

        // Updated PDF Generation Logic
        async function generatePDF() {
            const btn = document.querySelector('button[onclick="generatePDF()"]');
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á...';
            
            // 1. Prepare Data for Print Template
            const printBody = document.querySelector('#print-table-body tbody');
            printBody.innerHTML = '';
            let hasData = false;

            for(let i=0; i<5; i++) {
                // Get values
                const date = document.querySelector(`input[data-id="r${i}_date"]`).value;
                const name = document.querySelector(`input[data-id="r${i}_name"]`).value;
                const demo = document.querySelector(`input[data-id="r${i}_demo"]`).value;
                const disease = document.querySelector(`input[data-id="r${i}_disease"]`).value;
                const source = document.querySelector(`input[data-id="r${i}_source"]`).value;
                
                // Get value from new selects
                const method = document.querySelector(`select[data-id="r${i}_method"]`).value;
                const qty = document.querySelector(`select[data-id="r${i}_qty"]`).value;
                // Combine them
                const usage = (method && qty) ? `${method} (${qty})` : (method || qty || '-');

                const symptom = document.querySelector(`select[data-id="r${i}_symptom"]`).value; // Now a select
                const severity = document.querySelector(`select[data-id="r${i}_severity"]`).value;
                const action = document.querySelector(`input[data-id="r${i}_action"]`).value;
                const outcome = document.querySelector(`select[data-id="r${i}_outcome"]`).value;

                // Only add row if name is filled
                if(name) {
                    hasData = true;
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${date}</td>
                        <td>${name}</td>
                        <td>${demo}</td>
                        <td>${disease}</td>
                        <td>${source}</td>
                        <td>${usage}</td>
                        <td>${symptom}</td>
                        <td>${severity}</td>
                        <td>${action}</td>
                        <td>${outcome}</td>
                    `;
                    printBody.appendChild(tr);
                }
            }

            if(!hasData) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£");
                btn.innerHTML = '<i class="fa-solid fa-print mr-1"></i> PDF';
                return;
            }

            // Set Print Date
            const now = new Date();
            document.getElementById('print-date').innerText = now.toLocaleDateString('th-TH') + ' ' + now.toLocaleTimeString('th-TH');

            try {
                // 2. Render the Hidden Print Area
                const printArea = document.getElementById('print-area');
                
                // Move print area into view temporarily for html2canvas (fixes blank image issue on some devices)
                printArea.style.left = '0';
                printArea.style.zIndex = '-100';

                const canvas = await html2canvas(printArea, { 
                    scale: 2, // Higher scale for better quality
                    useCORS: true,
                    backgroundColor: '#ffffff'
                });

                // Hide it back
                printArea.style.left = '-9999px';

                // 3. Generate PDF
                const imgData = canvas.toDataURL('image/png');
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF('p', 'mm', 'a4');
                
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = pdf.internal.pageSize.getHeight();
                const imgProps = pdf.getImageProperties(imgData);
                const ratio = imgProps.width / imgProps.height;
                const printHeight = pdfWidth / ratio;

                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, printHeight);
                pdf.save('CARE_Report_Standard.pdf');

            } catch(e) {
                console.error(e);
                alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + e.message);
            } finally {
                btn.innerHTML = '<i class="fa-solid fa-print mr-1"></i> PDF';
            }
        }

        // Init
        window.onload = initTable;

    </script>
</body>
</html>